@page "/{author}/stats"
@using Microsoft.AspNetCore.Authorization
@using Chirp.Core.Dto
@using Chirp.WebService.Models
@model Chirp.WebService.Pages.UserStatisticsModel
@attribute [AllowAnonymous]

//Parts of this code has been generated by Vercel V0: https://v0.dev/r/1b6ldi7gujp

@{
    ViewData["Title"] = "Chirp!";
    Layout = "Shared/_Layout";
    var routeName = HttpContext.GetRouteValue("author");
}

<main class="flex flex-col gap-4 p-4 overflow-auto bg-gray-100 dark:bg-gray-700">
    <h1 class="text-3xl text-black font-bold">Stats</h1>
    
    <!--Following-->
    <div class="flex flex-col rounded-2xl shadow-lg">
        <div class="flex justify-center items-center bg-[#3498db] rounded-t-2xl">
            <p class="text-xl text-white font-semibold py-[8px]">Following: @(Model.Following.Count)</p>
        </div>
        @foreach(string s in Model.Following)
        {
            <div class=" py-3 px-5 flex justify-between">
                <a href="/@(s)">@(s)</a>
            </div>
        }
    </div>
    
    <!--Likes-->
    <div class="flex flex-col rounded-2xl shadow-lg">
        <div class="flex justify-center items-center bg-[#3498db] rounded-t-2xl">
            <p class="text-xl text-white font-semibold py-[8px]">Liked Cheeps</p>
        </div>
        @foreach (CheepDto c in Model.LikesCheeps)
        {
            CheepPartialModel cpm = new CheepPartialModel
            {
                AuthorAvatarUrl = c.AuthorAvatarUrl,
                AuthorName = c.AuthorName,
                AuthorUsername = c.AuthorUsername,
                AuthorId = c.AuthorId,
                CheepId = c.CheepId,
                Timestamp = c.Timestamp,
                Text = c.Text,
                isLikedByUser = true
            };
            
            <partial name="_CheepCardPartial" model=@(cpm)/>
        }
    </div>
</main>